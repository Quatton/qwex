{"components":{"schemas":{"AuthorizeBody":{"additionalProperties":false,"properties":{"$schema":{"description":"A URL to the JSON Schema for this object.","example":"https://example.com/schemas/AuthorizeBody.json","format":"uri","readOnly":true,"type":"string"},"authorize_url":{"description":"URL to redirect user to for OAuth authorization","type":"string"},"state":{"description":"State parameter for CSRF protection","type":"string"}},"required":["authorize_url","state"],"type":"object"},"ErrorDetail":{"additionalProperties":false,"properties":{"location":{"description":"Where the error occurred, e.g. 'body.items[3].tags' or 'path.thing-id'","type":"string"},"message":{"description":"Error message text","type":"string"},"value":{"description":"The value at the given location"}},"type":"object"},"ErrorModel":{"additionalProperties":false,"properties":{"$schema":{"description":"A URL to the JSON Schema for this object.","example":"https://example.com/schemas/ErrorModel.json","format":"uri","readOnly":true,"type":"string"},"detail":{"description":"A human-readable explanation specific to this occurrence of the problem.","example":"Property foo is required but is missing.","type":"string"},"errors":{"description":"Optional list of individual error details","items":{"$ref":"#/components/schemas/ErrorDetail"},"nullable":true,"type":"array"},"instance":{"description":"A URI reference that identifies the specific occurrence of the problem.","example":"https://example.com/error-log/abc123","format":"uri","type":"string"},"status":{"description":"HTTP status code","example":400,"format":"int64","type":"integer"},"title":{"description":"A short, human-readable summary of the problem type. This value should not change between occurrences of the error.","example":"Bad Request","type":"string"},"type":{"default":"about:blank","description":"A URI reference to human-readable documentation for the error.","example":"https://example.com/errors/example","format":"uri","type":"string"}},"type":"object"},"GetArtifactURLOutputBody":{"additionalProperties":false,"properties":{"$schema":{"description":"A URL to the JSON Schema for this object.","example":"https://example.com/schemas/GetArtifactURLOutputBody.json","format":"uri","readOnly":true,"type":"string"},"url":{"description":"Presigned download URL","type":"string"}},"required":["url"],"type":"object"},"GetRunLogsOutputBody":{"additionalProperties":false,"properties":{"$schema":{"description":"A URL to the JSON Schema for this object.","example":"https://example.com/schemas/GetRunLogsOutputBody.json","format":"uri","readOnly":true,"type":"string"},"logs":{"description":"Run logs","type":"string"}},"required":["logs"],"type":"object"},"ListBackendsOutputBody":{"additionalProperties":false,"properties":{"$schema":{"description":"A URL to the JSON Schema for this object.","example":"https://example.com/schemas/ListBackendsOutputBody.json","format":"uri","readOnly":true,"type":"string"},"backends":{"description":"List of enabled backends","items":{"type":"string"},"nullable":true,"type":"array"}},"required":["backends"],"type":"object"},"ListRunArtifactsOutputBody":{"additionalProperties":false,"properties":{"$schema":{"description":"A URL to the JSON Schema for this object.","example":"https://example.com/schemas/ListRunArtifactsOutputBody.json","format":"uri","readOnly":true,"type":"string"},"artifacts":{"description":"List of artifacts","items":{"$ref":"#/components/schemas/RunArtifact"},"nullable":true,"type":"array"}},"required":["artifacts"],"type":"object"},"ListRunsOutputBody":{"additionalProperties":false,"properties":{"$schema":{"description":"A URL to the JSON Schema for this object.","example":"https://example.com/schemas/ListRunsOutputBody.json","format":"uri","readOnly":true,"type":"string"},"runs":{"description":"List of runs","items":{"$ref":"#/components/schemas/RunResponse"},"nullable":true,"type":"array"}},"required":["runs"],"type":"object"},"MeResponseBody":{"additionalProperties":false,"properties":{"$schema":{"description":"A URL to the JSON Schema for this object.","example":"https://example.com/schemas/MeResponseBody.json","format":"uri","readOnly":true,"type":"string"},"user":{"$ref":"#/components/schemas/User"}},"required":["user"],"type":"object"},"RefreshTokenRequestBody":{"additionalProperties":false,"properties":{"$schema":{"description":"A URL to the JSON Schema for this object.","example":"https://example.com/schemas/RefreshTokenRequestBody.json","format":"uri","readOnly":true,"type":"string"},"refresh_token":{"description":"Refresh token issued from login or previous refresh","type":"string"}},"required":["refresh_token"],"type":"object"},"RefreshTokenResponseBody":{"additionalProperties":false,"properties":{"$schema":{"description":"A URL to the JSON Schema for this object.","example":"https://example.com/schemas/RefreshTokenResponseBody.json","format":"uri","readOnly":true,"type":"string"},"access_token":{"description":"New short-lived access token","type":"string"},"expires_in":{"description":"Access token lifetime in seconds","format":"int64","type":"integer"},"refresh_token":{"description":"Rotated refresh token","type":"string"},"token_type":{"description":"Token type descriptor","example":"bearer","type":"string"}},"required":["access_token","refresh_token","token_type","expires_in"],"type":"object"},"RunArtifact":{"additionalProperties":false,"properties":{"content_type":{"description":"MIME type","type":"string"},"filename":{"description":"Original filename","type":"string"},"key":{"description":"Storage key","type":"string"},"size":{"description":"Size in bytes","format":"int64","type":"integer"},"url":{"description":"Download URL (presigned)","type":"string"}},"required":["key","filename","size","content_type"],"type":"object"},"RunResponse":{"additionalProperties":false,"properties":{"$schema":{"description":"A URL to the JSON Schema for this object.","example":"https://example.com/schemas/RunResponse.json","format":"uri","readOnly":true,"type":"string"},"args":{"description":"Command arguments","items":{"type":"string"},"nullable":true,"type":"array"},"artifacts":{"description":"Run artifacts","items":{"$ref":"#/components/schemas/RunArtifact"},"nullable":true,"type":"array"},"backend":{"description":"Backend used (local, docker, k8s)","type":"string"},"command":{"description":"Command","type":"string"},"created_at":{"description":"Creation timestamp","type":"string"},"error":{"description":"Error message if failed","type":"string"},"exit_code":{"description":"Exit code","format":"int64","type":"integer"},"finished_at":{"description":"Finish timestamp","type":"string"},"id":{"description":"Run ID","type":"string"},"metadata":{"additionalProperties":{"type":"string"},"description":"Additional metadata","type":"object"},"name":{"description":"Run name","type":"string"},"started_at":{"description":"Start timestamp","type":"string"},"status":{"description":"Run status","type":"string"}},"required":["id","backend","status","command","created_at"],"type":"object"},"SubmitRunRequest":{"additionalProperties":false,"properties":{"$schema":{"description":"A URL to the JSON Schema for this object.","example":"https://example.com/schemas/SubmitRunRequest.json","format":"uri","readOnly":true,"type":"string"},"args":{"description":"Command arguments","items":{"type":"string"},"nullable":true,"type":"array"},"backend":{"description":"Backend to use (local, docker, k8s). Defaults to local","type":"string"},"command":{"description":"Command to execute","type":"string"},"env":{"additionalProperties":{"type":"string"},"description":"Environment variables","type":"object"},"image":{"description":"Container image (for docker/k8s backends)","type":"string"},"name":{"description":"Run name (optional)","type":"string"},"working_dir":{"description":"Working directory","type":"string"}},"required":["command"],"type":"object"},"User":{"additionalProperties":false,"properties":{"email":{"description":"Email address of the principal","type":"string"},"id":{"description":"Unique identifier for the principal","type":"string"},"login":{"description":"Login name of the principal","type":"string"},"name":{"description":"Full name of the principal","type":"string"}},"required":["id","login","name","email"],"type":"object"}},"securitySchemes":{"bearer":{"bearerFormat":"JWT","description":"JWT token from /api/auth/callback","scheme":"bearer","type":"http"}}},"info":{"title":"qwex Controller","version":"1.0.0"},"openapi":"3.0.3","paths":{"/api/auth/callback":{"get":{"description":"Handles the OAuth callback, exchanges code for token, and returns JWT","operationId":"auth-callback","parameters":[{"description":"Authorization code from OAuth provider","explode":false,"in":"query","name":"code","required":true,"schema":{"description":"Authorization code from OAuth provider","type":"string"}},{"description":"State parameter for CSRF validation","explode":false,"in":"query","name":"state","required":true,"schema":{"description":"State parameter for CSRF validation","type":"string"}}],"responses":{"204":{"description":"No Content","headers":{"Location":{"schema":{"description":"Redirect location when response_mode=redirect","type":"string"}}}},"default":{"content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ErrorModel"}}},"description":"Error"}},"summary":"OAuth callback handler","tags":["iam"]}},"/api/auth/login":{"get":{"description":"Starts the OAuth authentication process by redirecting to the provider","operationId":"auth-login","parameters":[{"description":"URI to redirect after authentication","example":"http://localhost:8080/callback","explode":false,"in":"query","name":"redirect_uri","schema":{"description":"URI to redirect after authentication","example":"http://localhost:8080/callback","type":"string"}},{"description":"Upstream OAuth provider","example":"github","explode":false,"in":"query","name":"provider","schema":{"default":"github","description":"Upstream OAuth provider","enum":["github"],"example":"github","type":"string"}},{"description":"Whether to include the minted token in the callback redirect","explode":false,"in":"query","name":"include_token","schema":{"default":true,"description":"Whether to include the minted token in the callback redirect","type":"boolean"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthorizeBody"}}},"description":"OK","headers":{"Location":{"schema":{"description":"Redirect location when response_mode=redirect","type":"string"}}}},"default":{"content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ErrorModel"}}},"description":"Error"}},"summary":"Initiate authentication","tags":["iam"]}},"/api/auth/refresh":{"post":{"description":"Exchanges a valid refresh token for a new access token and rotated refresh token","operationId":"auth-refresh","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenRequestBody"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenResponseBody"}}},"description":"OK"},"default":{"content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ErrorModel"}}},"description":"Error"}},"summary":"Refresh access token","tags":["iam"]}},"/api/backends":{"get":{"description":"Get a list of enabled runner backends","operationId":"list-backends","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ListBackendsOutputBody"}}},"description":"OK"},"default":{"content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ErrorModel"}}},"description":"Error"}},"summary":"List enabled backends","tags":["Runs"]}},"/api/me":{"get":{"description":"Retrieves information about the currently authenticated user","operationId":"get-me","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MeResponseBody"}}},"description":"OK"},"default":{"content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ErrorModel"}}},"description":"Error"}},"security":[{"bearer":[]}],"summary":"Get current user","tags":["iam"]}},"/api/runs":{"get":{"description":"Get a list of all runs","operationId":"list-runs","parameters":[{"description":"Filter by backend (local, docker, k8s)","explode":false,"in":"query","name":"backend","schema":{"description":"Filter by backend (local, docker, k8s)","type":"string"}},{"description":"Filter by status","explode":false,"in":"query","name":"status","schema":{"description":"Filter by status","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ListRunsOutputBody"}}},"description":"OK"},"default":{"content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ErrorModel"}}},"description":"Error"}},"summary":"List runs","tags":["Runs"]},"post":{"description":"Submit a job for execution on the specified backend","operationId":"submit-run","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubmitRunRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RunResponse"}}},"description":"OK"},"default":{"content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ErrorModel"}}},"description":"Error"}},"summary":"Submit a new run","tags":["Runs"]}},"/api/runs/{runId}":{"delete":{"description":"Cancel a running job","operationId":"cancel-run","parameters":[{"description":"Run ID","in":"path","name":"runId","required":true,"schema":{"description":"Run ID","type":"string"}}],"responses":{"204":{"description":"No Content"},"default":{"content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ErrorModel"}}},"description":"Error"}},"summary":"Cancel a run","tags":["Runs"]},"get":{"description":"Get details of a specific run","operationId":"get-run","parameters":[{"description":"Run ID","in":"path","name":"runId","required":true,"schema":{"description":"Run ID","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RunResponse"}}},"description":"OK"},"default":{"content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ErrorModel"}}},"description":"Error"}},"summary":"Get run details","tags":["Runs"]}},"/api/runs/{runId}/artifacts":{"get":{"description":"List all artifacts from a run execution","operationId":"list-run-artifacts","parameters":[{"description":"Run ID","in":"path","name":"runId","required":true,"schema":{"description":"Run ID","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ListRunArtifactsOutputBody"}}},"description":"OK"},"default":{"content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ErrorModel"}}},"description":"Error"}},"summary":"List run artifacts","tags":["Runs"]}},"/api/runs/{runId}/artifacts/{filename}/url":{"get":{"description":"Get a presigned URL to download an artifact","operationId":"get-artifact-url","parameters":[{"description":"Run ID","in":"path","name":"runId","required":true,"schema":{"description":"Run ID","type":"string"}},{"description":"Artifact filename","in":"path","name":"filename","required":true,"schema":{"description":"Artifact filename","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetArtifactURLOutputBody"}}},"description":"OK"},"default":{"content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ErrorModel"}}},"description":"Error"}},"summary":"Get artifact download URL","tags":["Runs"]}},"/api/runs/{runId}/logs":{"get":{"description":"Get logs from a run execution","operationId":"get-run-logs","parameters":[{"description":"Run ID","in":"path","name":"runId","required":true,"schema":{"description":"Run ID","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetRunLogsOutputBody"}}},"description":"OK"},"default":{"content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ErrorModel"}}},"description":"Error"}},"summary":"Get run logs","tags":["Runs"]}}}}