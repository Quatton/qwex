{"components":{"schemas":{"ErrorDetail":{"additionalProperties":false,"properties":{"location":{"description":"Where the error occurred, e.g. 'body.items[3].tags' or 'path.thing-id'","type":"string"},"message":{"description":"Error message text","type":"string"},"value":{"description":"The value at the given location"}},"type":"object"},"ErrorModel":{"additionalProperties":false,"properties":{"$schema":{"description":"A URL to the JSON Schema for this object.","example":"https://example.com/schemas/ErrorModel.json","format":"uri","readOnly":true,"type":"string"},"detail":{"description":"A human-readable explanation specific to this occurrence of the problem.","example":"Property foo is required but is missing.","type":"string"},"errors":{"description":"Optional list of individual error details","items":{"$ref":"#/components/schemas/ErrorDetail"},"nullable":true,"type":"array"},"instance":{"description":"A URI reference that identifies the specific occurrence of the problem.","example":"https://example.com/error-log/abc123","format":"uri","type":"string"},"status":{"description":"HTTP status code","example":400,"format":"int64","type":"integer"},"title":{"description":"A short, human-readable summary of the problem type. This value should not change between occurrences of the error.","example":"Bad Request","type":"string"},"type":{"default":"about:blank","description":"A URI reference to human-readable documentation for the error.","example":"https://example.com/errors/example","format":"uri","type":"string"}},"type":"object"},"HealthOutputBody":{"additionalProperties":false,"properties":{"$schema":{"description":"A URL to the JSON Schema for this object.","example":"https://example.com/schemas/HealthOutputBody.json","format":"uri","readOnly":true,"type":"string"},"status":{"description":"Health status","example":"ok","type":"string"}},"required":["status"],"type":"object"},"Item":{"additionalProperties":false,"properties":{"machine_id":{"type":"string"},"status":{"type":"string"}},"required":["machine_id","status"],"type":"object"},"ListMachinesResponseBody":{"additionalProperties":false,"properties":{"$schema":{"description":"A URL to the JSON Schema for this object.","example":"https://example.com/schemas/ListMachinesResponseBody.json","format":"uri","readOnly":true,"type":"string"},"machines":{"items":{"$ref":"#/components/schemas/Item"},"nullable":true,"type":"array"}},"required":["machines"],"type":"object"},"MachineResponseBody":{"additionalProperties":false,"properties":{"$schema":{"description":"A URL to the JSON Schema for this object.","example":"https://example.com/schemas/MachineResponseBody.json","format":"uri","readOnly":true,"type":"string"},"machine_id":{"description":"Unique identifier for the machine","type":"string"},"status":{"description":"Current status of the machine","enum":["creating","starting","running","stopping","stopped"],"type":"string"},"user_id":{"description":"ID of the user who owns the machine","type":"string"}},"required":["machine_id","status"],"type":"object"},"MeResponseBody":{"additionalProperties":false,"properties":{"$schema":{"description":"A URL to the JSON Schema for this object.","example":"https://example.com/schemas/MeResponseBody.json","format":"uri","readOnly":true,"type":"string"},"user":{"$ref":"#/components/schemas/User"}},"required":["user"],"type":"object"},"RootOutputBody":{"additionalProperties":false,"properties":{"$schema":{"description":"A URL to the JSON Schema for this object.","example":"https://example.com/schemas/RootOutputBody.json","format":"uri","readOnly":true,"type":"string"},"message":{"description":"Welcome message","example":"hello world from qwex controller","type":"string"}},"required":["message"],"type":"object"},"User":{"additionalProperties":false,"properties":{"email":{"description":"Email address of the principal","type":"string"},"id":{"description":"Unique identifier for the principal","type":"string"},"login":{"description":"Login name of the principal","type":"string"},"name":{"description":"Full name of the principal","type":"string"}},"required":["id","login","name","email"],"type":"object"}},"securitySchemes":{"bearer":{"bearerFormat":"JWT","description":"JWT token from /auth/github/login","scheme":"bearer","type":"http"}}},"info":{"title":"qwex Controller","version":"1.0.0"},"openapi":"3.0.3","paths":{"/":{"get":{"description":"Returns a welcome message","operationId":"get-root","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RootOutputBody"}}},"description":"OK"},"default":{"content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ErrorModel"}}},"description":"Error"}},"summary":"Root endpoint","tags":["General"]}},"/api/machines":{"get":{"description":"List all machines owned by the authenticated user","operationId":"list-machines","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ListMachinesResponseBody"}}},"description":"OK"},"default":{"content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ErrorModel"}}},"description":"Error"}},"security":[{"bearer":[]}],"summary":"List user's machines","tags":["Machines"]},"post":{"description":"Creates and starts a new machine (pod) with the uv image","operationId":"create-machine","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MachineResponseBody"}}},"description":"OK"},"default":{"content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ErrorModel"}}},"description":"Error"}},"security":[{"bearer":[]}],"summary":"Create a new machine","tags":["Machines"]}},"/api/machines/{machine_id}":{"delete":{"description":"Stops and deletes a machine (pod) and all associated resources","operationId":"delete-machine","parameters":[{"description":"The machine ID to delete","in":"path","name":"machine_id","required":true,"schema":{"description":"The machine ID to delete","format":"uuid","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MachineResponseBody"}}},"description":"OK"},"default":{"content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ErrorModel"}}},"description":"Error"}},"security":[{"bearer":[]}],"summary":"Delete a machine","tags":["Machines"]}},"/api/me":{"get":{"description":"Retrieves information about the currently authenticated user","operationId":"get-me","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MeResponseBody"}}},"description":"OK"},"default":{"content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ErrorModel"}}},"description":"Error"}},"security":[{"bearer":[]}],"summary":"Get current user","tags":["iam"]}},"/health":{"get":{"description":"Returns the health status of the controller","operationId":"health-check","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthOutputBody"}}},"description":"OK"},"default":{"content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ErrorModel"}}},"description":"Error"}},"summary":"Health check","tags":["General"]}}}}