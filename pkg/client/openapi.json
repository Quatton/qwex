{"components":{"schemas":{"AuthorizeBody":{"additionalProperties":false,"properties":{"$schema":{"description":"A URL to the JSON Schema for this object.","example":"https://example.com/schemas/AuthorizeBody.json","format":"uri","readOnly":true,"type":"string"},"authorize_url":{"description":"URL to redirect user to for OAuth authorization","type":"string"},"state":{"description":"State parameter for CSRF protection","type":"string"}},"required":["authorize_url","state"],"type":"object"},"ErrorDetail":{"additionalProperties":false,"properties":{"location":{"description":"Where the error occurred, e.g. 'body.items[3].tags' or 'path.thing-id'","type":"string"},"message":{"description":"Error message text","type":"string"},"value":{"description":"The value at the given location"}},"type":"object"},"ErrorModel":{"additionalProperties":false,"properties":{"$schema":{"description":"A URL to the JSON Schema for this object.","example":"https://example.com/schemas/ErrorModel.json","format":"uri","readOnly":true,"type":"string"},"detail":{"description":"A human-readable explanation specific to this occurrence of the problem.","example":"Property foo is required but is missing.","type":"string"},"errors":{"description":"Optional list of individual error details","items":{"$ref":"#/components/schemas/ErrorDetail"},"nullable":true,"type":"array"},"instance":{"description":"A URI reference that identifies the specific occurrence of the problem.","example":"https://example.com/error-log/abc123","format":"uri","type":"string"},"status":{"description":"HTTP status code","example":400,"format":"int64","type":"integer"},"title":{"description":"A short, human-readable summary of the problem type. This value should not change between occurrences of the error.","example":"Bad Request","type":"string"},"type":{"default":"about:blank","description":"A URI reference to human-readable documentation for the error.","example":"https://example.com/errors/example","format":"uri","type":"string"}},"type":"object"},"JobResponse":{"additionalProperties":false,"properties":{"$schema":{"description":"A URL to the JSON Schema for this object.","example":"https://example.com/schemas/JobResponse.json","format":"uri","readOnly":true,"type":"string"},"args":{"description":"Command arguments","items":{"type":"string"},"nullable":true,"type":"array"},"command":{"description":"Command","type":"string"},"created_at":{"description":"Creation timestamp","type":"string"},"error":{"description":"Error message if failed","type":"string"},"exit_code":{"description":"Exit code","format":"int64","type":"integer"},"finished_at":{"description":"Finish timestamp","type":"string"},"id":{"description":"Job ID","type":"string"},"metadata":{"additionalProperties":{"type":"string"},"description":"Additional metadata","type":"object"},"name":{"description":"Job name","type":"string"},"started_at":{"description":"Start timestamp","type":"string"},"status":{"description":"Job status","type":"string"}},"required":["id","name","status","command","created_at"],"type":"object"},"ListJobsOutputBody":{"additionalProperties":false,"properties":{"$schema":{"description":"A URL to the JSON Schema for this object.","example":"https://example.com/schemas/ListJobsOutputBody.json","format":"uri","readOnly":true,"type":"string"},"jobs":{"description":"List of jobs","items":{"$ref":"#/components/schemas/JobResponse"},"nullable":true,"type":"array"}},"required":["jobs"],"type":"object"},"MeResponseBody":{"additionalProperties":false,"properties":{"$schema":{"description":"A URL to the JSON Schema for this object.","example":"https://example.com/schemas/MeResponseBody.json","format":"uri","readOnly":true,"type":"string"},"user":{"$ref":"#/components/schemas/User"}},"required":["user"],"type":"object"},"RefreshTokenRequestBody":{"additionalProperties":false,"properties":{"$schema":{"description":"A URL to the JSON Schema for this object.","example":"https://example.com/schemas/RefreshTokenRequestBody.json","format":"uri","readOnly":true,"type":"string"},"refresh_token":{"description":"Refresh token issued from login or previous refresh","type":"string"}},"required":["refresh_token"],"type":"object"},"RefreshTokenResponseBody":{"additionalProperties":false,"properties":{"$schema":{"description":"A URL to the JSON Schema for this object.","example":"https://example.com/schemas/RefreshTokenResponseBody.json","format":"uri","readOnly":true,"type":"string"},"access_token":{"description":"New short-lived access token","type":"string"},"expires_in":{"description":"Access token lifetime in seconds","format":"int64","type":"integer"},"refresh_token":{"description":"Rotated refresh token","type":"string"},"token_type":{"description":"Token type descriptor","example":"bearer","type":"string"}},"required":["access_token","refresh_token","token_type","expires_in"],"type":"object"},"SubmitJobRequest":{"additionalProperties":false,"properties":{"$schema":{"description":"A URL to the JSON Schema for this object.","example":"https://example.com/schemas/SubmitJobRequest.json","format":"uri","readOnly":true,"type":"string"},"args":{"description":"Command arguments","items":{"type":"string"},"nullable":true,"type":"array"},"command":{"description":"Command to execute","type":"string"},"env":{"additionalProperties":{"type":"string"},"description":"Environment variables","type":"object"},"name":{"description":"Job name","type":"string"},"working_dir":{"description":"Working directory","type":"string"}},"required":["name","command"],"type":"object"},"User":{"additionalProperties":false,"properties":{"email":{"description":"Email address of the principal","type":"string"},"id":{"description":"Unique identifier for the principal","type":"string"},"login":{"description":"Login name of the principal","type":"string"},"name":{"description":"Full name of the principal","type":"string"}},"required":["id","login","name","email"],"type":"object"}},"securitySchemes":{"bearer":{"bearerFormat":"JWT","description":"JWT token from /api/auth/callback","scheme":"bearer","type":"http"}}},"info":{"title":"qwex Controller","version":"1.0.0"},"openapi":"3.0.3","paths":{"/api/auth/callback":{"get":{"description":"Handles the OAuth callback, exchanges code for token, and returns JWT","operationId":"auth-callback","parameters":[{"description":"Authorization code from OAuth provider","explode":false,"in":"query","name":"code","required":true,"schema":{"description":"Authorization code from OAuth provider","type":"string"}},{"description":"State parameter for CSRF validation","explode":false,"in":"query","name":"state","required":true,"schema":{"description":"State parameter for CSRF validation","type":"string"}}],"responses":{"204":{"description":"No Content","headers":{"Location":{"schema":{"description":"Redirect location when response_mode=redirect","type":"string"}}}},"default":{"content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ErrorModel"}}},"description":"Error"}},"summary":"OAuth callback handler","tags":["iam"]}},"/api/auth/login":{"get":{"description":"Starts the OAuth authentication process by redirecting to the provider","operationId":"auth-login","parameters":[{"description":"URI to redirect after authentication","example":"http://localhost:8080/callback","explode":false,"in":"query","name":"redirect_uri","schema":{"description":"URI to redirect after authentication","example":"http://localhost:8080/callback","type":"string"}},{"description":"Upstream OAuth provider","example":"github","explode":false,"in":"query","name":"provider","schema":{"default":"github","description":"Upstream OAuth provider","enum":["github"],"example":"github","type":"string"}},{"description":"Whether to include the minted token in the callback redirect","explode":false,"in":"query","name":"include_token","schema":{"default":true,"description":"Whether to include the minted token in the callback redirect","type":"boolean"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthorizeBody"}}},"description":"OK","headers":{"Location":{"schema":{"description":"Redirect location when response_mode=redirect","type":"string"}}}},"default":{"content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ErrorModel"}}},"description":"Error"}},"summary":"Initiate authentication","tags":["iam"]}},"/api/auth/refresh":{"post":{"description":"Exchanges a valid refresh token for a new access token and rotated refresh token","operationId":"auth-refresh","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenRequestBody"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenResponseBody"}}},"description":"OK"},"default":{"content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ErrorModel"}}},"description":"Error"}},"summary":"Refresh access token","tags":["iam"]}},"/api/jobs":{"get":{"description":"Get a list of all jobs","operationId":"list-jobs","parameters":[{"description":"Filter by status","explode":false,"in":"query","name":"status","schema":{"description":"Filter by status","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ListJobsOutputBody"}}},"description":"OK"},"default":{"content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ErrorModel"}}},"description":"Error"}},"summary":"List jobs","tags":["Jobs"]},"post":{"description":"Submit a job for execution","operationId":"submit-job","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubmitJobRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/JobResponse"}}},"description":"OK"},"default":{"content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ErrorModel"}}},"description":"Error"}},"summary":"Submit a new job","tags":["Jobs"]}},"/api/jobs/{jobId}":{"delete":{"description":"Cancel a running job","operationId":"cancel-job","parameters":[{"description":"Job ID","in":"path","name":"jobId","required":true,"schema":{"description":"Job ID","type":"string"}}],"responses":{"204":{"description":"No Content"},"default":{"content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ErrorModel"}}},"description":"Error"}},"summary":"Cancel a job","tags":["Jobs"]},"get":{"description":"Get details of a specific job","operationId":"get-job","parameters":[{"description":"Job ID","in":"path","name":"jobId","required":true,"schema":{"description":"Job ID","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/JobResponse"}}},"description":"OK"},"default":{"content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ErrorModel"}}},"description":"Error"}},"summary":"Get job details","tags":["Jobs"]}},"/api/me":{"get":{"description":"Retrieves information about the currently authenticated user","operationId":"get-me","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MeResponseBody"}}},"description":"OK"},"default":{"content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ErrorModel"}}},"description":"Error"}},"security":[{"bearer":[]}],"summary":"Get current user","tags":["iam"]}}}}