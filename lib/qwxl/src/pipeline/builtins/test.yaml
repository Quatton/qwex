log:
  uses: "@std/log"

tasks:
  assert:
    cmd: |
      local description="$1"
      local condition="$2"

      if eval "$condition"; then
        {{ log.tasks.info }} "${Q_GREEN}✔${Q_RESET} $description"
        return 0
      else
        {{ log.tasks.error }} "${Q_RED}✘${Q_RESET} $description"
        {{ log.tasks.error }} "  Condition: $condition"
        return 1
      fi

  assert_eq:
    cmd: |
      local description="$1"
      local expected="$2"
      local actual="$3"

      if [ "$expected" = "$actual" ]; then
        {{ log.tasks.info }} "${Q_GREEN}✔${Q_RESET} $description"
        return 0
      else
        {{ log.tasks.error }} "${Q_RED}✘${Q_RESET} $description"
        {{ log.tasks.error }} "  Expected: $expected"
        {{ log.tasks.error }} "  Actual:   $actual"
        return 1
      fi

  assert_file:
    cmd: |
      local description="$1"
      local filepath="$2"

      if [ -f "$filepath" ]; then
        {{ log.tasks.info }} "${Q_GREEN}✔${Q_RESET} $description"
        return 0
      else
        {{ log.tasks.error }} "${Q_RED}✘${Q_RESET} $description"
        {{ log.tasks.error }} "  File not found: $filepath"
        return 1
      fi
