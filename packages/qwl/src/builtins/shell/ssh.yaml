name: ssh

vars:
  host: ""

tasks:
  # Execute a command on remote host
  exec:
    run: |
      ssh {{ host }} "$@"

  # Remote execution boundary - wraps commands in heredoc for remote execution
  # Usage: {% qx %}...commands...{% xq %}
  # The compiler will:
  # 1. Detect task references inside {% qx %} blocks
  # 2. Generate unique heredoc ID
  # 3. Include dependencies via module:include
  # 4. Escape $ as \$ for remote evaluation
  remote:
    run: |
      ssh {{ host }} bash -s -- "$@"
