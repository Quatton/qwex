tasks:
  once:
    vars:
      key: $1
      fn: $2
    cmd: |
      declare -gA UTILS_ONCE_HASHSET
      if [[ -z "${UTILS_ONCE_HASHSET[{{ vars.key }}]+x}" ]]; then
        UTILS_ONCE_HASHSET[{{ vars.key }}]=1
        eval "{{ vars.fn }}"
      fi
