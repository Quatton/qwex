name: local-ssh-docker-k8s-setup

modules:
  log:
    source: std/log

vars:
  demo_dir: "./demo"

tasks:
  setup:
    run: |
      {{ log.info }} "Setting up demo workspace..."
      
      # Create demo directory
      mkdir -p "{{ demo_dir }}"
      cd "{{ demo_dir }}"
      
      # Initialize uv project
      {{ log.info }} "Initializing uv project..."
      uv init --name demo
      
      # Initialize git
      {{ log.info }} "Initializing git..."
      git init
      
      # Copy config
      {{ log.info }} "Copying config..."
      cp -r ../config/* .
      
      # Create hello.py
      {{ log.info }} "Creating hello.py..."
      printf '%s\n' 'def main():' '    print("hello 0")' '' 'if __name__ == "__main__":' '    main()' > hello.py
      
      {{ log.info }} "Setup complete! cd {{ demo_dir }} to start."

  clean:
    run: |
      {{ log.info }} "Cleaning up demo..."
      rm -rf "{{ demo_dir }}"
      {{ log.info }} "Done."
