name: hello-world

modules:
  "log": 
    source: qstd/log
  "steps":
    source: qstd/steps
  "@module": 
    source: qstd/module

tasks:
  greet:
    run: |
      echo "Hello, World!"
  debug:
    run: |
      {{ log.debug }} "Debugging Hello World Module"
  say:
    args:
      - name: message
        default: "Hello from Hello World Module!"
      - name: times
        default: 1
    vars:
      compile_time_var: "This get inlined at compile time. and can be overridden. It's also scoped"
    run: |
      # using $ in command is raw by default. You don't need to escape it.
      echo "Compile Time Var: {{ vars.compile_time_var }}"
      for i in $(seq 1 {{ args.times }}); do
        echo "{{ args.message }}"
      done
  debug-vars:
    uses: log.debug
    with:
      - "Debugging Hello World Module with Variables"
      - "Module Name: {{ name }}"
      - "Available Tasks: {{ tasks | keys | join(', ') }}"
  runstep:
    run: |
      {{ steps.step }} "Greet Step" "{{ greet }}"
      {{ steps.step }} "Debug Step" "{{ debug }}"
  runsteps-vars:
    uses: steps.steps
    with:
      - name: "Great Step"
        run: "{{ greet }}"
      - name: "Debug Step"
        run: "{{ debug }}"
      - name: "Step can also use lol"
        uses: log.debug
        with:
          - "This is a step using log.debug directly."