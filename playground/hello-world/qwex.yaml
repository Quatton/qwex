name: hello-world

modules:
  "log": 
    source: ../../lib/qstd/log.yaml
  "steps":
    source: ../../lib/qstd/steps.yaml

tasks:
  greet:
    run: |
      echo "Hello, World!"
  debug:
    run: |
      {{ log.debug }} "Debugging Hello World Module"
  say:
    vars:
      message: "Hello from Hello World Module!"
      times: 1
      compile_time_var: "This get inlined at compile time. and can be overridden. It's also scoped"
    run: |
      # using $ in command is raw by default. You don't need to escape it.
      echo "Compile Time Var: {{ compile_time_var }}"
      for i in $(seq 1 {{ times }}); do
        echo "{{ message }}"
      done
  debug-vars:
    uses: log.debug
    with:
      - "Debugging Hello World Module with Variables"
      - "Module Name: {{ module_name }}"
  runstep:
    run: |
      {{ steps.compose }} "Greet Step" "{{ greet }}"
      {{ steps.compose }} "Debug Step" "{{ debug }}"
  runsteps-vars:
    uses: steps.compose
    with:
      - name: "Greet Step"
        run: "{{ greet }}"
      - name: "Debug Step"
        run: "{{ debug }}"
        with:
          - "This is a step using log.debug directly."